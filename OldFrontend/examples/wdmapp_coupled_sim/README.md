# Example of a coupled simulation

This example is an extremely simplified version of code coupling as
implemented in the ECP-WDMApp project using EFFIS 2.0. 

Here are the steps to run this example

```
> effis-cpp.py repo /full_path_to/wdmapp_coupled_sim
> effis-compose.py coupled_sim.yaml
> effis-submit run_1
```

Once the example starts running, you should see 2 windows, one directly above the other,
with a sinusoidal perturbation moving from right to left, from the "edge" region to the
"core" region. Information in the "buffer" region of the edge is sent to the core code
every 20 time steps using in-memory coupling (the Sustainable Staging Transport SST engine
in [ADIOS2](https://adios2.readthedocs.io/en/latest/index.html)).

**effis-cpp.py repo** processes the EFFIS pragmas in all the files found in the
`wdmapp_coupled_sim` directory and outputs the results to new files that have the
`-effis` string added to their original names. That's the default string but it can be
changed with the option `-s` or `--suffix``.

**effis-compose.py** reads the run parameters from the file `coupled_sim.yaml` and creates
all the directories and files needed for the run.

**effis-submit _directory_** submits or runs the simulation according to the files
generated by **effis-compose.py**. The _directory_ has to match the one specified in
the example.yaml file, which is `run_1` in this example.

